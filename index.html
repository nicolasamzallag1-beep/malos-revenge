<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Malo's Revenge â€” Game of the Year Edition</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Creepster&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">

<style>
/* ====== GLOBAL ====== */
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:'Orbitron',sans-serif;
  background:#000;
  color:#fff;
  overflow:hidden;
  cursor:crosshair;
  user-select:none;
}

/* ===== BACKGROUND ===== */
#bg-canvas{position:fixed;inset:0;z-index:-2}
#particles{position:fixed;inset:0;pointer-events:none;z-index:-1}

/* ===== UI ===== */
#start-screen,#end-screen{
  position:absolute;inset:0;
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  background:radial-gradient(circle,rgba(150,0,150,.35),rgba(0,0,0,.9));
  backdrop-filter:blur(10px);
  z-index:20;
}
#end-screen{display:none}

h1{
  font-family:'Creepster',cursive;
  font-size:clamp(3rem,8vw,6rem);
  color:#ff0066;
  text-shadow:0 0 30px #ff0066,4px 4px #000;
}
.subtitle{
  margin:10px 0 40px;
  letter-spacing:.2em;
  color:#ffcc00;
}

.diff-container{display:flex;gap:20px;flex-wrap:wrap;justify-content:center}
.diff-btn{
  padding:18px 34px;
  font-weight:900;
  border-radius:14px;
  border:3px solid;
  cursor:pointer;
  font-size:1.1rem;
  transition:.25s;
}
.diff-btn:hover{transform:scale(1.08)}
.easy{background:#00ff88;border-color:#00ff88;color:#003322}
.medium{background:#ffaa00;border-color:#ffaa00}
.hard{background:#ff0066;border-color:#ff0066}
.insane{background:#9900ff;border-color:#9900ff;animation:pulse 1.2s infinite}

@keyframes pulse{
  0%,100%{box-shadow:0 0 20px #9900ff}
  50%{box-shadow:0 0 50px #ff00ff}
}

/* ===== HUD ===== */
#hud{
  position:absolute;top:15px;left:15px;right:15px;
  display:none;justify-content:space-between;
  z-index:10;
}
.hud-box{
  background:rgba(0,0,0,.6);
  border:2px solid rgba(255,255,255,.2);
  padding:10px 18px;
  border-radius:12px;
}
.hud-box span{font-size:1.6rem;font-weight:900}

/* ===== CANVAS ===== */
#game-canvas{display:none}

/* ===== FX ===== */
.finger{
  position:absolute;font-size:5rem;
  transform:translate(-50%,-50%);
  animation:finger .7s cubic-bezier(.2,1.4,.2,1) forwards;
  z-index:1000;
  filter:drop-shadow(0 0 25px hotpink);
}
@keyframes finger{
  0%{scale:.2;opacity:0}
  40%{scale:1.6;opacity:1}
  100%{scale:1;opacity:0}
}
.screen-shake{animation:shake .25s}
@keyframes shake{
  0%{transform:translate(0)}
  25%{transform:translate(-8px,6px)}
  50%{transform:translate(8px,-6px)}
  75%{transform:translate(-6px,-4px)}
  100%{transform:translate(0)}
}
.toast{
  position:fixed;top:20px;left:50%;
  transform:translateX(-50%);
  background:rgba(0,0,0,.85);
  border:2px solid hotpink;
  padding:12px 22px;
  border-radius:16px;
  font-weight:800;
  z-index:2000;
}

/* ===== END ===== */
#restart{
  margin-top:30px;
  padding:16px 40px;
  font-size:1.2rem;
  font-weight:900;
  border-radius:14px;
  border:3px solid #ff0066;
  background:#ff0066;
  cursor:pointer;
}
</style>
</head>

<body>
<canvas id="bg-canvas"></canvas>
<div id="particles"></div>

<div id="start-screen">
  <h1>MALO'S REVENGE</h1>
  <div class="subtitle">CIRCUS MASSACRE EDITION</div>
  <div class="diff-container">
    <button class="diff-btn easy" onclick="startGame('easy')">EASY</button>
    <button class="diff-btn medium" onclick="startGame('medium')">MEDIUM</button>
    <button class="diff-btn hard" onclick="startGame('hard')">HARD</button>
    <button class="diff-btn insane" onclick="startGame('insane')">INSANE</button>
  </div>
</div>

<div id="hud">
  <div class="hud-box">Score<br><span id="score">0</span></div>
  <div class="hud-box">Temps<br><span id="time">60</span></div>
</div>

<canvas id="game-canvas"></canvas>

<div id="end-screen">
  <h1>GAME OVER</h1>
  <div id="final-score"></div>
  <button id="restart" onclick="location.reload()">REJOUER</button>
</div>

<script>
/* ===== CONFIG ===== */
const friends=[
 {id:'malo',name:'Malo',img:'malo.jpg'},
 {id:'marie',name:'Marie',img:'marie.jpg'},
 {id:'ptitnico',name:'PtitNico',img:'nico.jpg'},
 {id:'valentine',name:'Valentine',img:'valentine.jpg'}
];

const hitMessagesByCharacter={
 malo:[
  "C'est qui Ã§a ?",
  "On t'a dÃ©jÃ  vu quelque part ?",
  "On va faire comme si rien ne s'Ã©tait passÃ©.",
  "T'es perdu frÃ©rot ?",
  "La vie est injuste!",
  "Tu t'es trompÃ© de cible champion.",
  "C'Ã©tait pas dans le script Ã§a."
 ],
 marie:[
  "Je vais te gifler !",
  "PAS d'accord.",
  "Oups... Ã§a part en drame.",
  "T'as un problÃ¨me ?",
  "On va en reparler.",
  "C'Ã©tait une trÃ¨s mauvaise idÃ©e.",
  "Vraiment pas malin."
 ],
 ptitnico:[
  "Rastafarai !",
  "On dirait un problÃ¨me.",
  "Bad vibes",
  "Merci d'avoir tentÃ©.",
  "Tu t'acharnes ?",
  "C'Ã©tait presque bien.",
  "Fallait pas forcer."
 ],
 valentine:[
  "Elle coÃ»te cher !",
  "T'as vraiment cru que c'Ã©tait une bonne idÃ©e ?",
  "C'Ã©tait hors budget, dÃ©solÃ©.",
  "Tout le monde n'a pas le niveau.",
  "Tu peux pas te le permettre.",
  "Erreur de casting.",
  "C'Ã©tait ambitieux."
 ]
};

const missMessages=[
 "RatÃ© champion.",
 "Le cirque c'est toi.",
 "MÃªme bourrÃ© tu ferais mieux.",
 "T'as cliquÃ© oÃ¹ lÃ  ?",
 "Reprends un verre."
];

/* ===== GAME ===== */
const canvas=document.getElementById('game-canvas');
const ctx=canvas.getContext('2d');
canvas.width=innerWidth;canvas.height=innerHeight;

let targets=[],score=0,time=60,active=false;

/* ===== START ===== */
function startGame(){
 document.getElementById('start-screen').style.display='none';
 document.getElementById('hud').style.display='flex';
 canvas.style.display='block';
 active=true;
 spawn();
 setInterval(()=>{if(active&&time--<=0)endGame();updateHud()},1000);
 requestAnimationFrame(loop);
}

/* ===== TARGET ===== */
function spawn(){
 const f=friends[Math.floor(Math.random()*friends.length)];
 const img=new Image();img.src=f.img;
 targets.push({f,img,x:Math.random()*(canvas.width-80),y:Math.random()*(canvas.height-80),s:80});
 setTimeout(spawn,900);
}

/* ===== LOOP ===== */
function loop(){
 if(!active)return;
 ctx.clearRect(0,0,canvas.width,canvas.height);
 targets.forEach(t=>ctx.drawImage(t.img,t.x,t.y,t.s,t.s));
 requestAnimationFrame(loop);
}

/* ===== CLICK ===== */
canvas.onclick=e=>{
 let hit=false;
 targets.forEach((t,i)=>{
  if(e.offsetX>t.x&&e.offsetX<t.x+t.s&&e.offsetY>t.y&&e.offsetY<t.y+t.s){
   hit=true;score+=10;
   showToast(hitMessagesByCharacter[t.f.id]);
   finger(e.clientX,e.clientY);
   targets.splice(i,1);
  }
 });
 if(!hit)showToast(missMessages);
};

/* ===== UI ===== */
function showToast(arr){
 const t=document.createElement('div');
 t.className='toast';
 t.textContent=arr[Math.floor(Math.random()*arr.length)];
 document.body.appendChild(t);
 setTimeout(()=>t.remove(),1200);
}
function finger(x,y){
 const f=document.createElement('div');
 f.className='finger';f.textContent='ðŸ–•';
 f.style.left=x+'px';f.style.top=y+'px';
 document.body.appendChild(f);
 document.body.classList.add('screen-shake');
 setTimeout(()=>{f.remove();document.body.classList.remove('screen-shake')},700);
}
function updateHud(){
 document.getElementById('score').textContent=score;
 document.getElementById('time').textContent=time;
}
function endGame(){
 active=false;
 document.getElementById('end-screen').style.display='flex';
 document.getElementById('final-score').textContent='Score : '+score;
}
</script>
</body>
</html>
